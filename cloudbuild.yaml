steps:
- name: 'gcr.io/cloud-builders/docker'
  args: ['build', '-t', 'gcr.io/project-one-315608/project-one-gcp:$SHORT_SHA', '.']
- name: 'gcr.io/cloud-builders/docker'
  args: ['push', 'gcr.io/project-one-315608/project-one-gcp:$SHORT_SHA']
- name: 'gcr.io/cloud-builders/gcloud'
  args: ['beta', 'run', 'deploy', 'project-one-315608', '--region=asia-south1', '--platform=managed', '--image=gcr.io/project-one-315608/project-one-gcp:$SHORT_SHA']
- name: "gcr.io/project-one-315608/sonar-scanner:latest"
  args: 
    - "-Dsonar.host.url=https://sonarcloud.io/"
    - "-Dsonar.login=eff2c78ae9fa629347b491ec50873f896615cd0f"
    - "-Dsonar.projectKey=Project-one-GCP"
    - "-Dsonar.sources=."
 - name: "gcr.io/cloud-builders/docker"
   args: 
     - "build"
     - "-t"
     - "gcr.io/project-one-315608/project-one-gcp"
     - "."
images: 
  - "gcr.io/project-one-315608/project-one-gcp"
